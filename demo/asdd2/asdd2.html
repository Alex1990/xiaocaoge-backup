<!doctype html>
<!--[if lt IE 7]><html class="lt-ie7 lt-ie8 lt-ie9 lt-ie10" lang="zh"><![endif]-->
<!--[if IE 7]><html class="lt-ie8 lt-ie9 lt-ie10" lang="zh"><![endif]-->
<!--[if IE 8]><html class="lt-ie9 lt-ie10" lang="zh"><![endif]-->
<!--[if IE 9]><html class="lt-ie10" lang="zh"><![endif]-->
<!--[if gt IE 9]>--><html lang="zh" class="gt-ie9"><!--<![endif]-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title>安索点点</title>
    <link rel="stylesheet" class="main-css" href="css/style.css">
    <!--[if lt IE 9]>
    <script src="js/html5shiv.js"></script>
    <script src="js/respond.min.js"></script>
    <![endif]-->
    <script>
        if (document.addEventListener) { document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() { WeixinJSBridge.call('hideToolbar'); }); }
    </script>
</head>
<body>
    <div class="page">
        <div id="st-nav" class="st-nav">
            <span id="st-indicator" class="st-indicator"></span>
            <ul>
                <li class="cur"><a href="javascript:void(0)">产品</a></li>
                <li><a href="javascript:void(0)">动态</a></li>
                <li><a href="javascript:void(0)">关于</a></li>
                <li><a href="javascript:void(0)">联系</a></li>
            </ul>
        </div>
        <div id="st-con" class="st-con">
            <div class="st-con-wrap cf">
                <div class="st-item item-product" data-html="product.php">
                    <div class="slider-wrap">
                        <div id="slider" class="swipe slider">
                            <div class="swipe-wrap">
                                <div><a href="#"><img src="img/blank.gif" data-echo="img/img-01_1.jpg" alt="" /></a></div>
                                <div><a href="#"><img src="img/blank.gif" data-echo="img/img-02_1.jpg" alt="" /></a></div>
                                <div><a href="#"><img src="img/blank.gif" data-echo="img/img-03_1.jpg" alt="" /></a></div>
                            </div>
                        </div>
                        <div id="slider-nav" class="swipe-nav">
                            <p></p>
                        </div>
                    </div>
                    <ul class="product-list cf">
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-01.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-02.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-03.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-04.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-05.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                        <li><a href="javascript:void(0)"><span class="pitem-img"><img src="img/pitem-06.jpg" alt=""></span><span class="pitem-title"></span></a></li>
                    </ul>
                </div>
                <div class="st-item item-news" data-html="news.php">
                    <div>
                        <div class="timeline-line"></div>
                        <ul class="news-list">
                            <li class="news-item cf">
                                <div class="news-date">3月15日<span class="arrow"></span></div>
                                <span class="timeline-dot"></span>
                                <div class="news-con">
                                    <a href="javascript:void(0)">
                                        <h4 class="news-title">公司即将发布新款</h4>
                                        <p class="news-excerpt">本周稍晚，公司将会陆续发布几款全新设计的时尚牛仔新品，并限量抢购，届时新老会员均可到公司官网抢购...</p>
                                    </a>
                                </div>
                            </li>
                            <li class="news-item cf">
                                <div class="news-date">3月15日<span class="arrow"></span></div>
                                <span class="timeline-dot"></span>
                                <div class="news-con">
                                    <a href="javascript:void(0)">
                                        <h4 class="news-title">公司即将发布新款全新设计的休闲系列</h4>
                                        <p class="news-excerpt">本周稍晚，公司将会陆续发布几款全新设计的时尚牛仔新品，并限量抢购，届时新老会员均可到公司官网抢购...</p>
                                    </a>
                                </div>
                            </li>
                            <li class="news-item cf">
                                <div class="news-date">3月15日<span class="arrow"></span></div>
                                <span class="timeline-dot"></span>
                                <div class="news-con">
                                    <a href="javascript:void(0)">
                                        <h4 class="news-title">公司即将发布新款全新设计的休闲系列</h4>
                                        <p class="news-excerpt">本周稍晚，公司将会陆续发布几款全新设计的时尚牛仔新品，并限量抢购，届时新老会员均可到公司官网抢购...</p>
                                    </a>
                                </div>
                            </li>
                            <li class="news-item cf">
                                <div class="news-date">3月15日<span class="arrow"></span></div>
                                <span class="timeline-dot"></span>
                                <div class="news-con">
                                    <a href="javascript:void(0)">
                                        <h4 class="news-title">公司即将发布新款</h4>
                                        <p class="news-excerpt">本周稍晚，公司将会陆续发布几款全新设计的时尚牛仔新品，并限量抢购，届时新老会员均可到公司官网抢购...</p>
                                    </a>
                                </div>
                            </li>
                            <li class="news-item cf">
                                <div class="news-date">3月15日<span class="arrow"></span></div>
                                <span class="timeline-dot"></span>
                                <div class="news-con">
                                    <a href="javascript:void(0)">
                                        <h4 class="news-title">公司即将发布新款</h4>
                                        <p class="news-excerpt">本周稍晚，公司将会陆续发布几款全新设计的时尚牛仔新品，并限量抢购，届时新老会员均可到公司官网抢购...</p>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="st-item item-about" data-html="about.php">
                    <div class="banner">
                        <img src="img/banner.jpg" alt="">
                    </div>
                    <div class="entry">
                        <h3>发展历史</h3>
                        <p>1873年， Levi's®牛仔裤首次推出，并受到人们的爱戴，这是服装发展史上最成功丶知名度最高和被模仿最多的服装产品。经过几代经营家的努力， Levi's®牛仔裤深深吸引了不同年龄的爱好者，还启发了他们的想像力，他们购买牛仔裤时，往往只会 选择Levi's® 牛仔裤。</p>
                        <h3>我们的信念</h3>
                        <p>1991年，Levi Strauss & Co成为首家制定出全国行为守则的跨国服装公司，这可以确保我们全球的所有员工都能够在安全丶健康的环境下工作，并受到公正的待遇和尊重。</p>
                        <ul>
                            <li>与我们合作的供应商必须遵守当地法律，并达到我们在道德丶 法律丶卫生丶安全以及环保标准等方面的严格要求。</li>
                            <li>我们会对工厂进行评估，以确保其合规格。</li>
                            <li>不容许使用童工丶囚犯或强迫劳动力，也不容许采取体罚或其 他形式的强制措施。</li>
                            <li>工作时间丶工资和福利必须合法。</li>
                            <li>我们尊重工人自己结社的权利。</li>
                        </ul>
                    </div>
                </div>
                <div class="st-item item-contact" data-html="contact.php">
                    <ul class="contact-list">
                        <li>
                            <a href="tel:07692345678455"><span class="icon-call"></span><span>07692345678455</span></a>
                        </li>
                        <li>
                            <a href="tel:13812345678"><span class="icon-phone"></span><span>07692345678455</span></a>
                        </li>
                        <li>
                            <a href="mailto:contactus@domain.com"><span class="icon-email"></span><span>contactus@domain.com</span></a>
                        </li>
                        <li>
                            <a href="javascript:void(0)"><span class="icon-location"></span><span>东莞市第一国际汇一城5号楼123室</span></a>
                        </li>
                    </ul>
                    <div id="addr-map" class="addr-map"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/swipe.js"></script>
    <script>
        /*! Echo v1.5.0 | (c) 2014 @toddmotto | MIT license | github.com/toddmotto/echo */
        window.Echo=function(a,b){"use strict";var c,d,e,f=[],g=function(a){var d=a.getBoundingClientRect();return(d.top>=0&&d.left>=0&&d.top)<=(window.innerHeight||b.documentElement.clientHeight)+c},h=function(){var c=f.length;if(c>0)for(var d=0;c>d;d++){var h=f[d];h&&g(h)&&(h.src=h.getAttribute("data-echo"),f.splice(d,1),c=f.length,d--)}else b.removeEventListener?a.removeEventListener("scroll",i):a.detachEvent("onscroll",i),clearTimeout(e)},i=function(){clearTimeout(e),e=setTimeout(h,d)},j=function(e){var g=b.querySelectorAll("[data-echo]"),j=e||{};c=parseInt(j.offset||0),d=parseInt(j.throttle||250);for(var k=0;k<g.length;k++)f.push(g[k]);h(),b.addEventListener?(a.addEventListener("scroll",i,!1),a.addEventListener("load",i,!1)):(a.attachEvent("onscroll",i),a.attachEvent("onload",i))};return{init:j,render:h}}(this,document);
        Echo.init({
            offset: 100,
            throttle: 250
        });
        /* My Script */
        initSwipetab();
        initSlider();

        /* init swipetab */
        function initSwipetab() {
            var i,
                len,
                dataUrls = [],
                loadedStatus,
                stIndicator = id('st-indicator'),
                stNav = id('st-nav'),
                navItems = tag('li', stNav),
                stCon = id('st-con'),
                stItems = cls('st-item');
            
            len = navItems.length;
            loadedStatus = new Array(len);

            for (i = 0; i < len; i++) {
                navItems[i].setAttribute('data-idx', i);
                loadedStatus[i] = false;
                dataUrls.push(stItems[i].getAttribute('data-html'));
            }

            var mySwipe = Swipe(stCon, {
                startSlide: 0,
                speed: 300,
                auto: 0,
                continuous: true,
                disableScroll: false,
                stopPropagation: true,
                onswipe: function (delta) {
                    var delta = delta,
                        idx = mySwipe.getPos();

                    stIndicator.style.left = stIndicator.offsetWidth * idx - delta.x/len + 'px';
                },
                onrollback: function() {
                    var idx = mySwipe.getPos();
                    stIndicator.style.left = idx * stIndicator.offsetWidth + 'px';
                },
                callback: function(index) {
                    var idx = (len + index % len) % len;

                    // if (!loadedStatus[idx]) {
                    //     ajax(dataUrls[idx], {
                    //         onsuccess: function(data) {
                    //             stItems[idx].innerHTML = data;
                    //         }
                    //     });
                    // }

                    stIndicator.style.left = idx * stIndicator.offsetWidth + 'px';

                    for (i = 0; i < len; i++) {
                        removeClass(navItems[i], 'cur');
                    }
                    addClass(navItems[idx], 'cur');
                }
            });

            for (i = 0; i < len; i++) {
                navItems[i].addEventListener('touchstart', function() {
                    var j,
                        idx = parseInt(this.getAttribute('data-idx'));

                    mySwipe.slide(idx);
                    for (j = 0; j < len; j++) {
                        removeClass(navItems[j], 'cur');
                    }
                    addClass(this, 'cur');
                });
            }

        }

        /* swipe slider set */
        function initSlider() {
            var i,
                len,
                frag,
                indicator,
                slider = document.getElementById('slider'),
                sliderNav = document.getElementById('slider-nav'),
                sliderImgs = tag('img', slider),
                sliderNavPara = tag('p', sliderNav)[0];
            
            len = sliderImgs.length;
            frag = document.createDocumentFragment();
            for (i = 0; i < len; i++) {
                indicator = document.createElement('a');
                indicator.appendChild(document.createTextNode(i));
                frag.appendChild(indicator);
            }
            sliderNavPara.appendChild(frag);
            
            window.mySwipe = Swipe(slider, {
                speed: 400,
                auto: 3000,
                continuous: true,
                disableScroll: true,
                stopPropagation: true,
                callback: function(index) {
                    var sliderNav =  document.getElementById('slider-nav'),
                        navItems = sliderNav.getElementsByTagName('a');
                    
                    for (var i = 0, len = navItems.length; i < len; i++) {
                        removeClass(navItems[i], 'cur');
                    }
                    addClass(navItems[index], 'cur');
                }
            });
        }
        // Base
        function id(id) {
            return document.getElementById(id);
        }

        function tag(tag, parent) {
            parent = parent ? parent : document;
            return parent.getElementsByTagName(tag);
        }
        
        function cls(cls, parent) {
            parent = parent || document;
            return parent.getElementsByClassName(cls);
        }

        function hasClass(obj, cls) {
            return obj.className && obj.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
        }

        function addClass(obj, cls) {
            if (!hasClass(obj, cls)) obj.className += " " + cls;
        }

        function removeClass(obj, cls) {
            if (hasClass(obj, cls)) {
                var reg1 = new RegExp('(\\s|^)' + cls + '(\\s|$)'),
                    reg2 = new RegExp('\\s' + cls + '\\s');
                obj.className = reg2.test(obj.className) ?
                        obj.className.replace(reg2, ' ') :
                        obj.className.replace(reg1, '');
            }
        }

        function ajax(url, opts) {
            var type,
                data,
                headers,
                onsuccess,
                onerror;

            type = opts.type || 'get';
            data = opts.data || null;
            headers = opts.headers || {};
            onsuccess = opts.onsuccess || function() {};
            onerror = opts.onerror || function() {};

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    opts.onsuccess(xhr.responseText);
                }
            };

            for (var p in headers) {
                xhr.setRequestHeader(p, headers[p]);
            }

            xhr.open(url, type, true);
            xhr.send(opts.data);
        }
    </script>

</body>
</html>