<!DOCTYPE html>
<!--[if lt IE 8]><html class="no-js ie lt-ie10 lt-ie9 lt-ie8"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie10 lt-ie9"><![endif]-->
<!--[if IE 9]><html class="no-js lt-ie10"><![endif]-->
<!--[if gt IE 9]<!--><html class="no-js gt-ie9"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <title>从WordPress迁移博客到Hexo | 小曹哥的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
    <link rel="shortcut icon" href="/favicon/favicon.png">
    <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-touch-icon-152x152.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/favicon/win-8-icon-152x152.png">
  

  <link rel="stylesheet" href="/css/dist/style.min.css">
  <script src="/js/modernizr-custom.min.js"></script>
  
</head>
<body class="index">
  <div class="page">
    <div id="main" class="main">
      <header class="header">
  <div class="wrapper clearfix">
    <div class="search-form-wrap fr">
      <form action="//google.com/search" method="get" class="search-form">
        <input type="input" name="q" results="0" id="keywords" class="search-form-input hidden" placeholder="Search">
        <button id="search-btn" class="search-form-submit"><i class="icon icon-l icon-search" aria-hidden="true"></i><span class="visuallyhidden">Submit</span></button>
        <input type="hidden" name="q" value="site:http://www.xiaocaoge.com">
      </form>
    </div>
  </div>
</header>

      <div class="content">
        <section class="wrapper"><article id="post-migrate-to-hexo-from-wordpress" class="article article-type-post" itemprop="blogPost">
  <div class="article-meta clearfix">
    <div class="article-date fl">
  <time datetime="2015-05-23T09:58:00.000Z" itemprop="datePublished">2015-5-23</time>
</div>
    
  <div class="article-category fl">
    <a class="article-category-link" href="/category/前端/">前端</a>
  </div>

  </div>
  <div class="article-inner">
    
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      从WordPress迁移博客到Hexo
    </h1>
  

    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="为什么迁移？"><a href="#为什么迁移？" class="headerlink" title="为什么迁移？"></a>为什么迁移？</h2><p>实际上，迁移博客的决定大半年前，大概 2014 年 7 月份就已经决定了。当时考虑到托管在 Github 上面的静态博客有这么几种优势：</p>
<ul>
<li>采用 Markdown 方式书写，可采用任何自己喜欢的编辑器，含有代码块，书写方便，甚至以后写数学公式也可以采用 TeX 语法。当然，WordPress 也可以，不过总觉得安装插件不太直接。</li>
<li>Github Pages 免费，可以节省每年 200 大洋的虚拟主机费用，且托管在 Github 很放心。</li>
<li>静态页面速度快，不过这个现在体现不出来了，国内访问 Github Pages 网速慢。</li>
<li>不得不说我受到了流行趋势的影响，看到很多人采用了这种方式，我就想尝试下。</li>
</ul>
<p>大致就是以上几点原因使我最终决定迁移博客到 Github Pages。</p>
<h2 id="选择静态博客系统"><a href="#选择静态博客系统" class="headerlink" title="选择静态博客系统"></a>选择静态博客系统</h2><p>一开始，我先听说的 Jekyll，在尝试时，发现要安装自己不熟悉的工具，因为它是 Ruby 写成的，而且我当时用的 Windows 系统，最终闲它麻烦而放弃。然后就搜索了一些其他的静态博客，发现各种语言写的都有，最后发现了 <a href="http://hexo.io" target="_blank" rel="external">Hexo</a> 这个用 NodeJS 写的，而且是一个台湾人写的，发现已有不少人在用。当时自己也有学习一些 NodeJS 的知识，想着用了 Hexo 也可以顺便学习下别人怎么写的，于是就这样决定选择 Hexo 了。</p>
<h2 id="有点后悔选择-Hexo-了"><a href="#有点后悔选择-Hexo-了" class="headerlink" title="有点后悔选择 Hexo 了"></a>有点后悔选择 Hexo 了</h2><p>我感觉 Hexo 有几点不足，<strong>纯属个人拙见</strong>。</p>
<h3 id="主题质量低"><a href="#主题质量低" class="headerlink" title="主题质量低"></a>主题质量低</h3><p>我查看了所有的主题，发现大部分简直就是半成品，质量太低了，只有几个还可以。似乎缺乏用心的，且有设计能力的人来写 Hexo 主题。刚开始时，主题都只给主题源码的 Github 链接，没有截图，所以选择成本很高，有些链接失效了也没人管理。当然，Hexo 几乎只有一个人在管理所有的事情，所以很难忙得过来的，得多人协作。</p>
<h3 id="早期代码组织乱"><a href="#早期代码组织乱" class="headerlink" title="早期代码组织乱"></a>早期代码组织乱</h3><p>我只读了一些 2.8.* 时代的代码，感觉读懂代码好吃力，打断点调试都得同时打开很多个文件。读了一两个星期，才弄懂了一点点，当然这和我水平低也有很大关系。不过还是学到好多小的知识的，到 3.* 时代发现代码进行了大的重构，已经放弃阅读了。</p>
<h3 id="其他-N-多小问题"><a href="#其他-N-多小问题" class="headerlink" title="其他 N 多小问题"></a>其他 N 多小问题</h3><p><strong>只针对 2.8.3 版本，3.0.0 以后不太了解</strong></p>
<ul>
<li><p>不支持一篇文章多个分类目录，我在 WordPress 用到了一篇文章多个分类目录，结果 Hexo 不支持，我不得不把所有文章都变成一个分类目录。有人解释说可以使用标签，但是我认为分类属于相对固定的，而标签术语文章的几个核心关键词。另外，前端一些文章经常同时涉及到 CSS 和 JavaScript，这就决定一篇文章属于两个分类目录是很合理的，总不能都概括为前端吧。</p>
</li>
<li><p>Markdown 代码块必须使用四个空格缩进语法，用 ‘```’ 就不行，这还得自己写脚本转换已有的文章。</p>
</li>
<li><p>使用 highlightjs 的 theme 时，需要修改 CSS，去掉 ‘hljs-‘，不知道为什么 Hexo 默认这样选择，且没法配置。</p>
</li>
<li><p>分类目录<code>list_categories()</code>没法控制汉字排序，而且没法像 WordPress 方便获取一个目录列表，然后自己定制排序。</p>
</li>
<li><p>README.md 文件的渲染和删除，现在好像可以配置路径来过滤了。</p>
</li>
<li><p>文章更新日期当成创建日期，结果首页文章顺序发生了变化，需要自己手动日期。</p>
</li>
</ul>
<h2 id="写一个-Hexo-主题"><a href="#写一个-Hexo-主题" class="headerlink" title="写一个 Hexo 主题"></a>写一个 Hexo 主题</h2><p>一开始规划时，什么 Off-Canvas、响应式、社交网站链接、自定义字体、动画效果、兼容到IE8等都整上去，后来实际做时，发现每个都要花不少时间。而且很长时间没有写过什么 CSS，导致水平下降，写起来不熟练啊。</p>
<p>做有关设计方面的决定时，内心很纠结，比如超链接四种状态下的颜色选择、标题或内容的颜色、侧边栏的布局等，每次写主题时感觉这些好难做决定。主题的大致颜色是参考的原来的主题配色，网站整体布局参考了其他人的，而且这种布局不少见。每写一个主题，都被自己渣一样的设计能力虐心，也越来越倾向于不要这些布局了，就文章列表就行了。</p>
<p>另外，花时间的还有要了解 Hexo 写主题的一些 Helpers，主题的代码结构等，幸好是参考官网的一款主题，自己从头开始写更麻烦了。</p>
<p>虽然每次写博客主题时，感觉特别虐心，不过当渐渐完成之时，都会感觉比上一个主题有进步。另外，写博客主题必然要写文章的 CSS 样式，文章在很多网站都会呈现，写好这个很关键，要注意很多细节或者说临界情况。</p>
<h2 id="将-WordPress-的内容迁移到-Hexo"><a href="#将-WordPress-的内容迁移到-Hexo" class="headerlink" title="将 WordPress 的内容迁移到 Hexo"></a>将 WordPress 的内容迁移到 Hexo</h2><p>首先可以按照官网文档来操作，不过之后还有一些工作要做：</p>
<ul>
<li>所有的超链接确保正确，包括图片、DEMO 等的链接；</li>
<li>代码块高亮，以前用的 WordPress 一个插件，然后自己用 Node 写个脚本替换下或者使用 Sublime 自带的正则替换功能；</li>
<li>修复在转 Markdown 时的错误，确实有一些要自己调整，主要是加粗、列表；</li>
<li>有发现了不少文章中的错别字，顺便修正了；</li>
<li>DEMO文件、图片文件、附件等目录要放到所采用主题的<code>source</code>目录下；</li>
</ul>
<h2 id="部署到-Github-及配置自定义域名"><a href="#部署到-Github-及配置自定义域名" class="headerlink" title="部署到 Github 及配置自定义域名"></a>部署到 Github 及配置自定义域名</h2><p>Github Pages 分两种：User or organization site 和 Project site。我见到的很多人的博客都是前一种，而且前一种设置及配置自定义域名比较简便，跟着官方的文档和帮助说明就可以了。但是，有一个问题，所有其他项目的 Github Pages 页面的域名也会都跳转到你博客的域名下面，成为一个目录，如：</p>
<p><code>http://username.github.io/someproject</code></p>
<p>跳转到</p>
<p><code>http://www.yourblogdomain.com/someproject</code></p>
<p>这不是我想要的结果，我不希望博客域名影响到 Github 上面的项目链接。所以，我只好采用后一种：Project site，这种设置起来也难一点儿，主要是配置自定义域名。</p>
<p>设置步骤（我是采用 DNSPod 来解析域名）：</p>
<ol>
<li><p>为自己的博客创建一个 Repository，并创建<code>gh-pages</code>分支；</p>
</li>
<li><p>在 DNS 服务商处配置自己的 DNS，需要添加一条 A 记录和一条 CNAME 记录：</p>
<p>添加 A 记录，查找你 Github 子域名地址的静态 IP 地址：</p>
<pre><code>$ nslookup alex1990.github.io
Server:        211.162.96.1
Address:    211.162.96.1#53

Non-authoritative answer:
alex1990.github.io    canonical name = github.map.fastly.net.
Name:    github.map.fastly.net
Address: 103.245.222.133
</code></pre><p>A 记录主机记录字段选择<code>@</code>，记录值（填写IP地址的地方）填写使用<code>nslookup</code>查找到的地址，此处为：<code>103.245.222.133</code>。</p>
<p>添加 CNAME 记录，是为了能解析<code>www</code>域名。主机记录字段选择<code>www</code>，记录值填写自己的 Github 域名，此处为<code>alex1990.github.io</code>。</p>
</li>
<li><p>在 Repository 根目录下创建一个文件<code>CNAME</code>，其内容<code>www.xiaocaoge.com</code>，带<code>www</code>时，Github 会将<code>xiaocaoge.com</code> 跳到 <code>www.xiaocaoge.com</code>，可根据自己需要选择带或不带，将创建的文件 Push 到 Github 上面，等待几分钟以便 Github 刷新域名的跳转。</p>
</li>
</ol>
<p>另外要注意的是，如果先前建立过 User Pages，则所有的 Project Pages 域名仍然跳转，此时需要更新所有项目的<code>gh-pages</code>分支，即提交来刷新缓存。如果还不行，可尝试下面措施：</p>
<ul>
<li>清理浏览器缓存</li>
<li><code>chrome://net-internals#dns</code> 点击<code>clear host cache</code></li>
</ul>
<p>在实际的配置过程中，我花了两个晚上，看了十几个网页的教程，试了 N 多次，看了一篇文章 <a href="https://larry-price.com/blog/2014/02/12/custom-domain-with-github-pages" target="_blank" rel="external">Custom Domain With Github Pages</a> 才尝试成功。</p>

      
    </div>
    
    <footer class="article-footer clearfix">
      
  <ul class="article-tag-list clearfix">
    
    <li class="article-tag-list-item"><a href="http://www.xiaocaoge.com/tag/WordPress/">WordPress</a></li>
    
    <li class="article-tag-list-item"><a href="http://www.xiaocaoge.com/tag/Hexo/">Hexo</a></li>
    
    <li class="article-tag-list-item"><a href="http://www.xiaocaoge.com/tag/Blog/">Blog</a></li>
    
    <li class="article-tag-list-item"><a href="http://www.xiaocaoge.com/tag/Github/">Github</a></li>
    
  </ul>

      
        <!-- <a href="http://www.xiaocaoge.com/migrate-to-hexo-from-wordpress.html#comments" class="article-comment-link"><i class="icon icon-comment"></i><span class="visuallyhidden">Comments</span></a> -->
      
    </footer>
    
  </div>
  
</article>


  
<section id="comments">
  <!-- 多说评论框 start -->
  <div class="ds-thread" data-thread-key="post-migrate-to-hexo-from-wordpress" data-title="从WordPress迁移博客到Hexo" data-url="http://www.xiaocaoge.com/migrate-to-hexo-from-wordpress.html"></div>
  <!-- 多说评论框 end -->
</section>
  
</section>
      </div>
    </div>
    <aside class="sidebar">
  <div class="top-btn-group fl clearfix">
    <button id="sidebar-toggle" class="btn" type="button"><i class="icon icon-l icon-menu" aria-hidden="true"></i><span class="visuallyhidden">Menu</span></button>
    <a href="http://www.xiaocaoge.com" class="btn"><i class="icon icon-l icon-home" aria-hidden="true"></i><span class="visuallyhidden">Home</span></a>
</div>
  
    <div class="person-card">
  <div class="avatar">
    
      <img src="/img/avatar.jpeg" alt="Avatar" width="128" height="128">
    
  </div>
  
  <h1 class="author">Alex Chao</h1>
  
  <p class="description">All about the Web techniques, such as HTML, CSS, JavaScript, jQuery and many others.</p>
  
</div>
  
  
    <div class="social-list-wrap">
  <ul class="social-list clearfix">
  
    <li class="social-list-item item-twitter">
      <a href="https://twitter.com/AlexChaoHere" target="_blank">
        <i class="icon icon-twitter"></i>
        
        <span class="soical-list-item-text visuallyhidden">Twitter</span>
      </a>
    </li>
  
    <li class="social-list-item item-weibo">
      <a href="http://weibo.com/u/1660160490" target="_blank">
        <i class="icon icon-weibo"></i>
        
        <span class="soical-list-item-text visuallyhidden">Weibo</span>
      </a>
    </li>
  
    <li class="social-list-item item-github">
      <a href="https://github.com/Alex1990" target="_blank">
        <i class="icon icon-github"></i>
        
        <span class="soical-list-item-text visuallyhidden">Github</span>
      </a>
    </li>
  
    <li class="social-list-item item-email">
      <a href="mailto:alexchao1990@gmail.com" target="_blank">
        <i class="icon icon-email"></i>
        
        <span class="soical-list-item-text visuallyhidden">Email</span>
      </a>
    </li>
  
    <li class="social-list-item item-rss">
      <a href="/atom.xml" target="_blank">
        <i class="icon icon-rss"></i>
        
        <span class="soical-list-item-text visuallyhidden">RSS</span>
      </a>
    </li>
  
  </ul>
</div>
  
  
  <div class="widgets">
    
      
  <div class="widget-wrap widget-category">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/category/设计/">设计</a></li><li class="category-list-item"><a class="category-list-link" href="/category/后端/">后端</a></li><li class="category-list-item"><a class="category-list-link" href="/category/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/category/其他/">其他</a></li></ul>
    </div>
  </div>

    
      
  <div class="widget-wrap widget-tagcloud">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget widget-tagcloud-list">
      <a href="/tag/Blog/" style="font-size: 12px;">Blog</a> <a href="/tag/CSS/" style="font-size: 20px;">CSS</a> <a href="/tag/CSS-Sprites/" style="font-size: 12px;">CSS Sprites</a> <a href="/tag/Class/" style="font-size: 12px;">Class</a> <a href="/tag/DOOM/" style="font-size: 12px;">DOOM</a> <a href="/tag/DataURI/" style="font-size: 12px;">DataURI</a> <a href="/tag/Github/" style="font-size: 12px;">Github</a> <a href="/tag/Hexo/" style="font-size: 12px;">Hexo</a> <a href="/tag/ID/" style="font-size: 12px;">ID</a> <a href="/tag/Image-Replacement/" style="font-size: 12px;">Image Replacement</a> <a href="/tag/Javascript/" style="font-size: 16px;">Javascript</a> <a href="/tag/Joel/" style="font-size: 12px;">Joel</a> <a href="/tag/Linux/" style="font-size: 12px;">Linux</a> <a href="/tag/MDN/" style="font-size: 12px;">MDN</a> <a href="/tag/Mac/" style="font-size: 12px;">Mac</a> <a href="/tag/Markdown/" style="font-size: 12px;">Markdown</a> <a href="/tag/Markdown语法/" style="font-size: 12px;">Markdown语法</a> <a href="/tag/MySQL/" style="font-size: 12px;">MySQL</a> <a href="/tag/OSX/" style="font-size: 12px;">OSX</a> <a href="/tag/PHP/" style="font-size: 16px;">PHP</a> <a href="/tag/PHP入门/" style="font-size: 12px;">PHP入门</a> <a href="/tag/Photoshop/" style="font-size: 12px;">Photoshop</a> <a href="/tag/PrintConductor/" style="font-size: 12px;">PrintConductor</a> <a href="/tag/Responsive/" style="font-size: 12px;">Responsive</a> <a href="/tag/SSE/" style="font-size: 12px;">SSE</a> <a href="/tag/Server-Push/" style="font-size: 12px;">Server Push</a> <a href="/tag/SlideJS/" style="font-size: 12px;">SlideJS</a> <a href="/tag/Sublime/" style="font-size: 12px;">Sublime</a> <a href="/tag/Sublime-Text-2/" style="font-size: 12px;">Sublime Text 2</a> <a href="/tag/Tab/" style="font-size: 12px;">Tab</a>
    </div>
  </div>

    
  </div>
  
</aside>
    <footer class="footer">
  <div class="wrapper">
    <p class="site-footer">
      <span>&copy; 2016 Alex Chao</span>
      <span>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></span>
      <span>Theme designed by <a href="http://www.xiaocaoge.com/" target="_blank">Alex Chao</a></span>
    </p>
  </div>
</footer>
    
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
  var duoshuoQuery = {short_name:'xiaocaoge'};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- 多说公共JS代码 end -->

  </div>
  <script src="/js/main.min.js"></script>
</body>
</html>